---
description: 欢迎使用 Fatality
---

# Command

最后修改时间

25 December 2024

### 简介

`command` 类型用于更改渲染命令参数 在更改此类型的实例时要小心 向 `texture` 或 `frag_shader` 传递无效数据 或不恢复某些更改可能导致未定义行为 并且更可能崩溃 如果您不确定如何操作此类型 请参考示例

***

### 字段

#### texture

* **类型**: `ptr`
* **描述**: 纹理指针 可以通过访问 `texture` 类型实例的 `obj` 字段获取 向此字段传递无效数据将导致崩溃 请使用 `set_texture` 方法进行更安全的操作

#### frag\_shader

* **类型**: `ptr`
* **描述**: 片段着色器（在 DirectX 中称为像素着色器）指针 可以通过访问 `shader` 类型实例的 `obj` 字段获取 向此字段传递无效数据将导致崩溃 请使用 `set_shader` 方法进行更安全的操作

#### clip\_rect

* **类型**: `rect?`
* **描述**: 用于剪裁测试的剪裁矩形 如果设置为 `nil` 则不进行剪裁
* **建议**: 建议使用 `layer` 的 `override_clip_rect` 方法 虽然您可以传递自定义 `rect` 到此字段 但会丢失之前设置的剪裁矩形信息 使用该方法将确保与之前矩形相交并产生更预期的结果

#### uv\_rect

* **类型**: `rect?`
* **描述**: 用于纹理映射的 UV 矩形 如果此字段设置为 `nil` 将使用 `0, 0, 1, 1` 矩形来映射纹理 您可以在教程部分了解更多关于纹理映射的信息

#### alpha

* **类型**: `float`
* **描述**: 全局不透明度覆盖 默认值为 `1` 但如果您设置其他值 将调制每个后续形状的不透明度

#### rotation

* **类型**: `float`
* **描述**: 形状旋转 并非所有形状都支持此字段 值以度为单位 而不是弧度

#### anti\_alias

* **类型**: `bool`
* **描述**: 如果设置为 `true` 将对形状应用细分
* **注意**: 目前并非所有形状都支持细分 但建议始终启用 这将产生更好的结果

#### ignore\_scaling

* **类型**: `bool`
* **描述**: 如果设置为 `true` 将忽略全局 DPI 缩放 默认值为 `true` 但您可以根据需要将其设置为 `false` 以渲染自定义 UI 元素

#### chained\_call

* **类型**: `bool`
* **描述**: 仅在使用着色器时有用 如果设置为 `true` 将不会更新后备缓冲区纹理 这可用于需要相同纹理数据的情况 例如对后备缓冲区应用多个着色器
* **注意**: 捕获后备缓冲区是一个相对较慢的操作 尽量不要频繁捕获 后备缓冲区会自动捕获到唯一可用的图层 并且最好使用该图层以确保渲染尽可能快速

#### only\_downsampled

* **类型**: `bool`
* **描述**: 如果设置为 `true` 将捕获后备缓冲区（前提是 `chained_call` 设置为 `false`） 此字段名称具有误导性 因为在 CS:GO 版本的 Fatality 中 它用于配置渲染系统是否还应将捕获的后备缓冲区下采样到另一个纹理 在 DirectX11 中 此操作更快 因此始终执行

#### capture\_back\_buffer

* **类型**: `bool`
* **描述**: `only_downsampled` 的别名

#### is\_tile

* **类型**: `bool`
* **描述**: 如果设置为 `true` 将使用支持平铺的单独纹理采样器 默认情况下 所有纹理都被拉伸 但如果启用此选项 它们的平铺和拉伸将完全由 `uv_rect` 字段配置

#### mode

* **类型**: `render_mode`
* **描述**: 渲染模式 您可以在该类型的文档中了解更多相关信息

***

### 方法

#### set\_texture

* **描述**: 以安全方式设置纹理
* **参数**:
  * `tex`: `texture` - 纹理对象
* **返回值**: 无
* **示例**:

```lua
cmd:set_texture(my_tex)
```

#### set\_shader

* **描述**: 以安全方式设置片段着色器
* **参数**:
  * `sh`: `shader` - 着色器对象
* **返回值**: 无
* **示例**:

```lua
cmd:set_shader(my_shader)
```

***

通过以上文档 您可以详细了解 `command` 类型及其相关字段和方法的功能和用法 希望这些信息对您有所帮助

***

苏黎世银云安全 ©
